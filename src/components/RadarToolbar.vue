# src/components/RadarToolbar.vue
###########////1 ÂÆåÊï¥ÁöÑtemplateÈÉ®ÂàÜ
<template>
  <div class="radar-toolbar">
    <!-- ÂØπË±°Ê®°ÊùøÂå∫ -->
    <div class="template-area">
      <div class="template-buttons">
        <button
          v-for="obj in objectTypes"
          :key="obj.typeName"
          :class="[
            'template-btn',
            obj.typeName.toLowerCase(),
            { active: selectedType === obj.typeName },
          ]"
          @click="selectObjectType(obj.typeName)"
        >
          <template v-if="obj.typeName === 'Radar'">
            <div class="radar-icon">
              <div class="radar-circle"></div>
              <div class="direction-point"></div>
            </div>
          </template>
          <template v-else-if="obj.typeName === 'Moving'">
            <div class="m-icon">Moving</div>
          </template>
          <template v-else>
            {{ obj.label }}   
          </template>
        </button>
      </div>

      <div class="action-buttons">
		<button class="action-btn create-btn" @click="createObject" :disabled="editMode !== 'template'">Create</button>
  		<!--<button class="action-btn set-btn" @click="updateObject" :disabled="editMode !== 'object'">Set</button> -->
  		<button class="action-btn delete-btn" @click="deleteObject" :disabled="editMode !== 'object'">Delete</button>
		<!-- Êñ∞Â¢û layout ÊåâÈíÆË°å -->
		<button class="layout-btn" @click="saveRoomLayout">SaveRm</button>
  		<button class="layout-btn" @click="loadRoomLayout">LoadRm</button>
		<button class="layout-btn" @click="saveRadarConfig">SaveRd</button>
		<button class="layout-btn" @click="loadRadarConfig">LoadRd</button> 
	 </div>
    </div>

    <!-- ÂØπË±°Â±ûÊÄßÂå∫ -->
	<div class="property-area">
	    <div class="name-row">
			<span>Name:</span>
	        <input type="text" v-model="objectName" placeholder="Name" class="name-input"  />
			<!-- <button class="layout-btn" @click="loadRadarConfig">LoadRd</button>  -->
	    </div>

	    <div
	        class="size-row"
	        v-if="['Door', 'Bed', 'Exclude', 'Other', 'Wall', 'TV'].includes(selectedType)"
	    >
	        <div class="input-group">
	            <span>L:</span>
	            <input
				  type="number"
				  v-model.number="properties.length"
				  min="10"
				  max="700"
				  step="10"
				  @change="validateLength"
				  @blur="validateLength"
	            />
	        </div>
	        <div class="input-group">
	            <span>W:</span>
	            <input
				  type="number"
				  v-model.number="properties.width"
				  min="10"
				  max="700"
				  step="10"
				  @change="validateWidth"
				  @blur="validateWidth"
	            />
	        </div>
	    </div>

	    <div class="specific-props" v-if="selectedType === 'Radar'">
	        <!-- Ê®°ÂºèÈÄâÊã© -->
	        <div class="mode-select">
	            <label>
	                <input type="radio" v-model="properties.mode" value="ceiling" />
	                Ceiling
	            </label>
	            <label>
	                <input type="radio" v-model="properties.mode" value="wall" />
	                Wall
	            </label>
	        </div>

	        <!-- È´òÂ∫¶ËæìÂÖ• -->
	        <div class="height-input">
	            <div class="input-group">
	                <span>H:</span>
	                <input
						  type="number"
						  v-model.number="currentModeConfig.height.default"
						  min="0"
						  max="330"
						  step="10"
						  @change="validateHeight"
						  @blur="validateHeight"
	                />
	                <span class="accuracy">150~330cm</span>
	            </div>
	        </div>

	        <!-- ËæπÁïåËÆæÁΩÆ -->
	        <div class="boundary-settings">
	            <div class="boundary-row">
	                <div class="input-group">
	                    <span>Le:</span>
	                    <input
	                        type="number"
	                        v-model="currentModeConfig.boundary.leftH"
	                        min="10"
	                        max="300"
	                        step="10"
	                        @change="validateBoundary"
	                        @blur="validateBoundary"
	                    />
	                </div>
	                <div class="input-group">
	                    <span>Ri:</span>
	                    <input
	                        type="number"
	                        v-model="currentModeConfig.boundary.rightH"
	                        min="10"
	                        max="300"
	                        step="10"
	                        @change="validateBoundary"
	                        @blur="validateBoundary"
	                    />
	                </div>
	            </div>
	            <div class="boundary-row">
	                <div class="input-group">
	                    <span>Fr:</span>
	                    <input
	                        type="number"
	                        v-model="currentModeConfig.boundary.frontV"
	                        :min="properties.mode === 'wall' ? 30 : 10"
	                        :max="properties.mode === 'wall' ? 400 : 200"
	                        step="10"
	                        @change="validateBoundary"
	                        @blur="validateBoundary"
	                    />
	                </div>
	                <div class="input-group">
	                    <span>Ba:</span>
	                    <input
	                        type="number"
	                        v-model="currentModeConfig.boundary.rearV"
	                        :min="properties.mode === 'wall' ? 0 : 10"
	                        :max="properties.mode === 'wall' ? 0 : 200"
	                        step="10"
	                        @change="validateBoundary"
	                        @blur="validateBoundary"
	                    />
	                    <!-- ÂêéËæπÁïåËæìÂÖ• -->
	                </div>
	            </div>
	        </div>

	        <!-- ÂºÄÂÖ≥ÈÄâÈ°π -->
	        <div class="show-controls">
	            <label>
	                <span>Show:</span>
	                <input type="checkbox" v-model="properties.showBoundary">
	                <span>Boundary</span>
	                <input type="checkbox" v-model="properties.showSignal">
	                <span>Signal</span>
	            </label>
	            <!-- ËæπÁïåÊòæÁ§∫ÂºÄÂÖ≥ -->
	        </div>
	    </div>

	    <div class="specific-props" v-if="selectedType === 'Bed'">
	        <div class="toggle-item">
	            <label>
	                <input type="checkbox" v-model="properties.isMonitored" />
	                Monitor Mode
	            </label>
	        </div>
	    </div>

	    <div class="specific-props" v-if="selectedType === 'Other'">
	        <div class="toggle-item">
	            <label>
	                <input type="checkbox" v-model="properties.borderOnly" />
	                Border Only
	            </label>
	        </div>
	    </div>
	</div>

    <!-- ÊéßÂà∂Âå∫ -->
    <div class="control-area">
      <div class="coordinates">
        <div class="coord-item">
          <span>X:</span>
          <input type="number" v-model="displayPosition.x" readonly />
        </div>
        <div class="coord-item">
          <span>Y:</span>
          <input type="number" v-model="displayPosition.y" readonly />
        </div>
      </div>

      <div class="direction-control">
        <!-- Â∑¶ÂàóÔºöÂºÄÂÖ≥ÊéßÂà∂ -->
        <div class="left-controls">
          <div>
            <label class="control-item" title="Lock">
              <input type="checkbox" v-model="isLocked" />
              üîí
            </label>
          </div>
          <div>
            <label class="control-item" title="Scale">
              <input type="checkbox" v-model="canvasStore.showScale" />
              üìè
            </label>
          </div>
          <div>
            <label class="control-item" title="Grid">
              <input type="checkbox" v-model="canvasStore.showGrid" />
              #Ô∏è‚É£
            </label>
          </div>
        </div>
        <!-- Âè≥ÂàóÔºöÊñπÂêëÊéßÂà∂ -->
        <div class="right-controls">
          <button class="dir-btn up" @click="move('up')" :disabled="isLocked">
            ‚Üë
          </button>
          <div class="middle-row">
            <button
              class="dir-btn left"
              @click="move('left')"
              :disabled="isLocked"
            >
              ‚Üê
            </button>
            <button
              class="dir-btn right"
              @click="move('right')"
              :disabled="isLocked"
            >
              ‚Üí
            </button>
          </div>
          <button
            class="dir-btn down"
            @click="move('down')"
            :disabled="isLocked"
          >
            ‚Üì
          </button>
        </div>
      </div>

      <div class="rotation-control">
        <button class="rot-btn" @click="rotate(-90)" :disabled="isLocked">
          -90¬∞
        </button>
        <button class="rot-btn" @click="rotate(-15)" :disabled="isLocked">
          -15¬∞
        </button>
        <button class="rot-btn" @click="rotate(15)" :disabled="isLocked">
          +15¬∞
        </button>
        <button class="rot-btn" @click="rotate(90)" :disabled="isLocked">
          +90¬∞
        </button>
      </div>
    </div>
  </div>
</template>

###########//2 scriptÈÉ®ÂàÜ‰ª£Á†Å
<script setup lang="ts">
// 1. ÂØºÂÖ•
import { ref, reactive, watch, computed } from "vue";
import { useObjectsStore } from "../stores/objects";
import { useMouseStore } from "../stores/mouse";
import { useCanvasStore } from "../stores/canvas";
import type { ObjectProperties, RoomLayout } from "../stores/types";



// 2. store ÂàùÂßãÂåñ
const objectsStore = useObjectsStore();
const mouseStore = useMouseStore();
const canvasStore = useCanvasStore();


// 3. Êé•Âè£ÂÆö‰πâ

// 4. Áä∂ÊÄÅÂÆö‰πâ

const objectTypes = [
  {typeValue:2,typeName: "Bed", label: "Bed", defaultLength: 190, defaultWidth: 90 },
  {typeValue:3,typeName: "Exclude", label: "Exclude", defaultLength: 50, defaultWidth: 50 },
  {typeValue:4,typeName: "Door", label: "Door", defaultLength: 90, defaultWidth: 30 },
  {typeValue:1,typeName: "Other", label: "Other", defaultLength: 50, defaultWidth: 50 },
  {typeValue:1,typeName: "Wall", label: "Wall", defaultLength: 200, defaultWidth: 5 },   
  {typeValue:3,typeName: "TV", label: "TV", defaultLength: 100, defaultWidth: 20 },        
  {typeValue:20,typeName: "Radar", label: "", defaultLength: 20, defaultWidth: 20 },
  {typeValue:10, typeName: "Moving", label: "Moving", defaultLength: 43, defaultWidth: 43 },
];

const selectedType = ref("");
const objectName = ref("");
const isLocked = ref(false);
const hasSelectedObject = ref(false);
// Áä∂ÊÄÅÊéßÂà∂
const editMode = ref<"template" | "object" | null>(null);

const properties = reactive<ObjectProperties>({
 // Âü∫Á°ÄÂ±ûÊÄß
 typeValue: 0,    // ÂàùÂßãÂÄº‰ºöÂú®ÈÄâÊã©Ê®°ÊùøÊó∂ËÆæÁΩÆ
 typeName: "",    // ÂàùÂßãÂÄº‰ºöÂú®ÈÄâÊã©Ê®°ÊùøÊó∂ËÆæÁΩÆ
 id: "",
 name: "",
 position: { x: 0, y: 250 },
 isLocked: false,

 // Èõ∑ËææÁâπÊúâÂ±ûÊÄß
 HFOV: 140,        // Ê∞¥Âπ≥ËßÜÂú∫Ëßí
 VFOV: 120,        // ÂûÇÁõ¥ËßÜÂú∫Ëßí
 rotation: 0,
 mode: "ceiling" as "ceiling" | "wall",  // Á±ªÂûãÊñ≠Ë®Ä
 // ÊåâÊ®°ÂºèÂàÜÁªÑÁöÑÂ±ûÊÄß
 ceiling: {
   height: {
     min: 150,
     max: 330,
     default: 280,
     step: 10
   },
   boundary: {
     leftH: 300,
     rightH: 300,
     frontV: 200,
     rearV: 200
   }
 },
 wall: {
   height: {
     min: 150,
     max: 330,
     default: 150,
     step: 10
   },
   boundary: {
     leftH: 300,
     rightH: 300,
     frontV: 400,
     rearV: 0
   }
 },
 showBoundary: false,
 showSignal: false,

 // ÂÖ∂‰ªñÂØπË±°ÁâπÊúâÂ±ûÊÄß
 length: 50,
 width: 50,
 isMonitored: false,
 borderOnly: false
});

const currentModeConfig = computed(() => 
  properties[properties.mode as "ceiling" | "wall"]
);


// ‰øÆÊîπ validateLength Âíå validateWidth
const validateLength = () => {
  const validatedLength = Math.min(700, Math.max(10, Math.round(properties.length / 10) * 10));
  if (objectsStore.selectedId) {
    objectsStore.updateObject(objectsStore.selectedId, {
      ...objectsStore.selectedObject,
      length: validatedLength
    });
  }
};

const validateWidth = () => {
  const validatedWidth = Math.min(700, Math.max(10, Math.round(properties.width / 10) * 10));
  if (objectsStore.selectedId) {
    objectsStore.updateObject(objectsStore.selectedId, {
      ...objectsStore.selectedObject,
      width: validatedWidth
    });
  }
};

const validateHeight = () => {
  const currentMode = properties.mode || 'ceiling';
  const heightConfig = currentMode === 'ceiling' ? 
    properties.ceiling.height : 
    properties.wall.height;

  heightConfig.default = Math.min(
    heightConfig.max,
    Math.max(
      heightConfig.min,
      Math.round(heightConfig.default / heightConfig.step) * heightConfig.step
    )
  );
};

const validateBoundary = () => {
  const currentMode = properties.mode;
  const boundary = currentModeConfig.value.boundary;
  
  boundary.leftH = Math.min(300, Math.max(10, Math.round(boundary.leftH / 10) * 10));
  boundary.rightH = Math.min(300, Math.max(10, Math.round(boundary.rightH / 10) * 10));
  
  if (currentMode === "wall") {
    boundary.frontV = Math.min(400, Math.max(30, Math.round(boundary.frontV / 10) * 10));
    boundary.rearV = 0;  // wallÊ®°ÂºèrearÂõ∫ÂÆö‰∏∫0
  } else {
    boundary.frontV = Math.min(200, Math.max(10, Math.round(boundary.frontV / 10) * 10));
    boundary.rearV = Math.min(200, Math.max(10, Math.round(boundary.rearV / 10) * 10));
  }
};

//4. ÁõëÂê¨ canvasStore ÁöÑ selectedId ÂèòÂåñÔºåÂêåÊ≠•Âà∞ UI
watch(
 () => objectsStore.selectedId,
 (newId) => {
   if (newId) {
     editMode.value = "object";
     selectedType.value = "";
     const obj = objectsStore.objects.find((o: ObjectProperties) => o.id === newId);
     if (obj) {
       hasSelectedObject.value = true;
       selectedType.value = obj.typeName;
	   objectName.value = obj.name;
       properties.name = obj.name;
       properties.position = obj.position;
       properties.rotation = obj.rotation;
       properties.isLocked = obj.isLocked;
	   isLocked.value = obj.isLocked; // Ê†πÊçÆÈÄâ‰∏≠ÂØπË±°ÁöÑisLockedÂ±ûÊÄßËÆæÁΩÆisLocked.value

       // ÂêåÊ≠•Âõ∫ÂÆöÁâ©‰ΩìÂ±ûÊÄß
       properties.length = obj.length;
       properties.width = obj.width;

        // Â¶ÇÊûúÊòØÈõ∑ËææÔºåÂêåÊ≠•Èõ∑ËææÁâπÊúâÂ±ûÊÄß
        if (obj.typeName === 'Radar') {
          properties.mode = obj.mode;
          properties.HFOV = obj.HFOV;
          properties.VFOV = obj.VFOV;
          properties.ceiling = obj.ceiling;
          properties.wall = obj.wall;
          properties.showBoundary = obj.showBoundary;
          properties.showSignal = obj.showSignal;
        }

       // ÂêåÊ≠•ÂÖ∂‰ªñÁâπÊúâÂ±ûÊÄß
       properties.isMonitored = obj.isMonitored || false;
       properties.borderOnly = obj.borderOnly || false;
     }
   }else {
      // Áî± Canvas ÁÇπÂáªÁ©∫ÁôΩÂ§ÑËß¶ÂèëÁöÑÂèñÊ∂àÈÄâ‰∏≠ÔºåÂú®ËøôÈáåÂ§ÑÁêÜ UI ÈáçÁΩÆ
      editMode.value =  null; //"template";
      selectedType.value = "";
      objectName.value = "";
      isLocked.value = false;
    }
  }
);

/* ‰ΩøÁî®watch ÂçïÁã¨ÁõëÂê¨Â±ûÊÄßÂèòÂåñÔºåÂêåÊ≠•Âà∞ÈÄâ‰∏≠ÂØπË±°ÁöÑÂ±ûÊÄß
//ÁõëÂê¨objectName.valueÁöÑÂèòÂåñÔºåÂêåÊ≠•Âà∞ÈÄâ‰∏≠ÂØπË±°ÁöÑnameÂ±ûÊÄß
watch(objectName, (newName) => {
  if (objectsStore.selectedId) {
    objectsStore.updateObject(objectsStore.selectedId, {
      ...objectsStore.selectedObject,
      name: newName
    });
  }
});

//ÁõëÂê¨isLocked.valueÁöÑÂèòÂåñÔºåÂêåÊ≠•Âà∞ÈÄâ‰∏≠ÂØπË±°ÁöÑisLockedÂ±ûÊÄß
watch(  () => isLocked.value,  (newValue) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj) {
        objectsStore.updateObject(objectsStore.selectedId, {
          ...obj,
          isLocked: newValue,
        });
      }
    }
  },
);



//ÁõëÂê¨radar modelÁöÑÂèòÂåñÔºåÂêåÊ≠•Âà∞ÈÄâ‰∏≠ÂØπË±°ÁöÑmodeÂ±ûÊÄß
watch(
  () => properties.mode,
  (newMode) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj && obj.typeName === 'Radar') {
        objectsStore.updateObject(objectsStore.selectedId, {
          ...obj,
          mode: newMode,
        });
      }
    }
  }
);

watch(
  () => properties.showBoundary,
  (newValue) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj && obj.typeName === 'Radar') {
        objectsStore.updateObject(objectsStore.selectedId, {
          ...obj,
          showBoundary: newValue,
        });
      }
    }
  }
);

watch(
  () => properties.showSignal,
  (newValue) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj && obj.typeName === 'Radar') {
        objectsStore.updateObject(objectsStore.selectedId, {
          ...obj,
          showSignal: newValue,
        });
      }
    }
  }
);


watch(
  () => properties.isMonitored,
  (newValue) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj && obj.typeName === 'Bed') {
        objectsStore.updateObject(objectsStore.selectedId, {
          ...obj,
          isMonitored: newValue,
        });
      }
    }
  }
);


//ÁõëÂê¨properties.borderOnlyÁöÑÂèòÂåñÔºåÂêåÊ≠•Âà∞ÈÄâ‰∏≠ÂØπË±°ÁöÑborderOnlyÂ±ûÊÄß
watch(
  () => properties.borderOnly,
  (newValue) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj && obj.typeName === 'Other') {
        objectsStore.updateObject(objectsStore.selectedId, {
          ...obj,
          borderOnly: newValue,
        });
      }
    }
  }
);
*/

// ÁõëÂê¨Name„ÄÅisLocked„ÄÅmode„ÄÅborderOnly„ÄÅisMonitored,showBoundary,showSignalÁöÑÂèòÂåñÔºåÂêåÊ≠•Âà∞ÈÄâ‰∏≠ÂØπË±°ÁöÑÂ±ûÊÄß
watch(
  [
    objectName,
    () => isLocked.value,
    () => properties.mode,
    () => properties.borderOnly,
    () => properties.isMonitored,
    () => properties.showBoundary,
    () => properties.showSignal
  ],
  ([newName, newIsLocked, newMode, newBorderOnly, newIsMonitored, newShowBoundary, newShowSignal]) => {
    if (objectsStore.selectedId) {
      const obj = objectsStore.objects.find((o) => o.id === objectsStore.selectedId);
      if (obj) {
        const updates: Partial<ObjectProperties> = {};

        // Â§ÑÁêÜ name ÂèòÂåñ
        if (newName !== undefined) {
          updates.name = newName;
        }

        // Â§ÑÁêÜ isLocked ÂèòÂåñ
        if (newIsLocked !== undefined) {
          updates.isLocked = newIsLocked;
        }

        // Â§ÑÁêÜ mode ÂèòÂåñ
        if (newMode !== undefined && obj.typeName === 'Radar') {
          updates.mode = newMode;
        }

        // Â§ÑÁêÜ borderOnly ÂèòÂåñ
        if (newBorderOnly !== undefined) {
          updates.borderOnly = newBorderOnly;
        }

        // Â§ÑÁêÜ isMonitored ÂèòÂåñ
        if (newIsMonitored !== undefined) {
          updates.isMonitored = newIsMonitored;
        }

        // Â§ÑÁêÜ showBoundary ÂèòÂåñ
        if (newShowBoundary !== undefined && obj.typeName === 'Radar') {
          updates.showBoundary = newShowBoundary;
        }

        // Â§ÑÁêÜ showSignal ÂèòÂåñ
        if (newShowSignal !== undefined && obj.typeName === 'Radar') {
          updates.showSignal = newShowSignal;
        }

        // ÊúâÊõ¥Êñ∞ÂàôË∞ÉÁî® updateObject
        if (Object.keys(updates).length > 0) {
          objectsStore.updateObject(objectsStore.selectedId, {
            ...obj,
            ...updates
          });
        }
      }
    }
  }
);






// 5. ÂáΩÊï∞ÂÆö‰πâ (Á°Æ‰øùÊØè‰∏™ÂáΩÊï∞Âè™ÂÆö‰πâ‰∏ÄÊ¨°)
//ÈÄâÂèñÊ®°ÊùøÊó∂ÔºåÂèñÊ∂àÊ¥ªÂä®ÂØπË±°ÔºåÈáçÁΩÆÂ±ûÊÉÖ„ÄÅobjectNameÂíåisLockedÁöÑUI
const selectObjectType = (typeName: string) => {
  editMode.value = "template";
  objectsStore.selectObject(null); // ÁÇπÂáªÊ®°ÊùøÊó∂ÔºåÂèñÊ∂àÁîªÂ∏ÉÂå∫ÁöÑÈÄâ‰∏≠,ÈÅøÂÖçÂêåÊó∂ÁºñËæëÊ¥ªÂä®ÂØπË±°
  selectedType.value = typeName;
  objectName.value = typeName;  //  ËÆæÁΩÆÈªòËÆ§ÂêçÁß∞‰∏∫Ê®°ÊùøÁ±ªÂûã
  isLocked.value =false;
  const objType = objectTypes.find((t) => t.typeName === typeName);
  if (objType) {
    properties.length = objType.defaultLength;
    properties.width = objType.defaultWidth;
    properties.rotation = 0;
    properties.isLocked = false;
	properties.isMonitored = false;
    properties.borderOnly = false;

    if (typeName === "Radar") {
     /*	  	
	  currentModeConfig.value.height.default = 
        properties.mode === "ceiling" ? properties.ceiling.height.default : properties.wall.height.default;
	  currentModeConfig.value.boundary.leftH=
	    properties.mode === "ceiling" ? properties.ceiling.boundary.leftH : properties.wall.boundary.leftH;
	  currentModeConfig.value.boundary.rightH=
	    properties.mode === "ceiling" ? properties.ceiling.boundary.rightH : properties.wall.boundary.rightH;
	  currentModeConfig.value.boundary.frontV=
	    properties.mode === "ceiling" ? properties.ceiling.boundary.frontV : properties.wall.boundary.frontV;
	  currentModeConfig.value.boundary.rearV=
	    properties.mode === "ceiling" ? properties.ceiling.boundary.rearV : properties.wall.boundary.rearV;	
	*/
	  properties.mode = "ceiling";
      properties.ceiling = {
        height: { min: 150, max: 330, default: 280, step: 10 },
        boundary: { leftH: 300, rightH: 300, frontV: 200, rearV: 200 },
      };
      properties.wall = {
        height: { min: 150, max: 330, default: 150, step: 10 },
        boundary: { leftH: 300, rightH: 300, frontV: 400, rearV: 0 },
      };
      properties.showBoundary = false;
      properties.showSignal = false;
	
    }
  }
};


const createObject = () => {
  const selectedObj = objectTypes.find((t) => t.typeName === selectedType.value);
  const objectData: Omit<ObjectProperties, "id"> = {
      typeValue: selectedObj?.typeValue || 0,  // ‰ªé objectTypes ‰∏≠Ëé∑ÂèñÂØπÂ∫îÁöÑ typeValue
	  typeName: selectedType.value,
	  name: objectName.value ,
	  position: {
		  x: objectsStore.objects.length * 20,
		  y: canvasStore.height / 2 + objectsStore.objects.length * 20,
	  },
	  length: properties.length,
	  width: properties.width,
	  rotation: 0,
	  isLocked: isLocked.value, // Ê†πÊçÆUIÁöÑÈÄâÊã©ËÆæÁΩÆisLockedÂ±ûÊÄß
	  mode: properties.mode,
	  ceiling: properties.ceiling, // Áõ¥Êé•‰ΩøÁî®ÂÖ∑‰ΩìÁöÑÊ®°ÂºèÊï∞ÊçÆ
	  wall: properties.wall, // Áõ¥Êé•‰ΩøÁî®ÂÖ∑‰ΩìÁöÑÊ®°ÂºèÊï∞ÊçÆ
	  showBoundary: properties.showBoundary,
	  showSignal: properties.showSignal,
	  isMonitored: properties.isMonitored,
	  borderOnly: properties.borderOnly,
  };

  objectsStore.createObject(objectData);
  
    // ÈáçÁΩÆ toolbar Âå∫ÁöÑÂ±ûÊÄßÂÄº
	  selectedType.value = "";
	  objectName.value = "";
	  properties.length = 50;
	  properties.width = 50;
	  properties.rotation = 0;
	  properties.isLocked = false;
	  isLocked.value = false; // UI‰øÆÊîπ isLocked.value
	  properties.mode = "ceiling";
	  properties.ceiling = {
	    height: { min: 150, max: 330, default: 280, step: 10 },
	    boundary: { leftH: 300, rightH: 300, frontV: 200, rearV: 200 },
	  };
	  properties.wall = {
	    height: { min: 150, max: 330, default: 150, step: 10 },
	    boundary: { leftH: 300, rightH: 300, frontV: 400, rearV: 0 },
	  };
	  properties.showBoundary = false;
	  properties.showSignal = false;
	  properties.isMonitored = false;
	  properties.borderOnly = false;
	  editMode.value = null;
};

const updateObject = () => {
  if (objectsStore.selectedId) {
    const  objectData: Partial<ObjectProperties> = {
      typeName: selectedType.value,
      name: objectName.value,
      length: properties.length,
      width: properties.width,
      mode: properties.mode,
	  ceiling: properties.ceiling,   // Áõ¥Êé•‰ΩøÁî®ÂÖ∑‰ΩìÁöÑÊ®°ÂºèÊï∞ÊçÆ
	  wall: properties.wall,         // Áõ¥Êé•‰ΩøÁî®ÂÖ∑‰ΩìÁöÑÊ®°ÂºèÊï∞ÊçÆ
      showBoundary: properties.showBoundary,
      showSignal: properties.showSignal,
      isMonitored: properties.isMonitored,
      borderOnly: properties.borderOnly,
    };
    objectsStore.updateObject(objectsStore.selectedId, objectData);
	objectsStore.selectObject(null);  // ËÆæÁΩÆÂÆåÂêéÔºåÂèñÊ∂àÈÄâ‰∏≠ÂØπË±°
  }
};

const deleteObject = () => {
  if (objectsStore.selectedId) {
    objectsStore.deleteObject(objectsStore.selectedId);
    objectsStore.selectObject(null);
    console.log("Delete current object");
  }
};

const move = (direction: "up" | "down" | "left" | "right") => {
  if (!objectsStore.selectedId) return;

  const obj = objectsStore.objects.find((o: ObjectProperties) => o.id === objectsStore.selectedId);
  if (!obj || obj.isLocked) return;

  let { x, y } = obj.position;
  const step = 10;

  switch (direction) {
    case "up":
      y -= step;
      break;
    case "down":
      y += step;
      break;
    case "left":
      x -= step;
      break;
    case "right":
      x += step;
      break;
  }

  objectsStore.updateObject(obj.id, {
    ...obj,
    position: { x, y },
  });
};

const rotate = (angle: number) => {
  if (!objectsStore.selectedId) return;

  const obj = objectsStore.objects.find((o: ObjectProperties) => o.id === objectsStore.selectedId);
  if (!obj || obj.isLocked) return;

  const newRotation = (obj.rotation + angle + 360) % 360;
  objectsStore.updateObject(obj.id, {
    ...obj,
    rotation: newRotation,
  });
};


const displayPosition = computed(() => {
  const roundToTen = (num: number) => Math.round(num / 10) * 10;

  if (objectsStore.selectedId) {
    const obj = objectsStore.objects.find((o: ObjectProperties) => o.id === objectsStore.selectedId);
    if (obj) {
      // Áõ¥Êé•ËøîÂõûÂèñÊï¥ÂêéÁöÑÂùêÊ†á
      return { 
        x: roundToTen(obj.position.x), 
        y: roundToTen(obj.position.y) 
      };
    }
  }
  // ÂΩìÊ≤°ÊúâÈÄâ‰∏≠ÂØπË±°Êó∂ÔºåÂØπÈº†Ê†áÂùêÊ†á‰πüËøõË°åÂèñÊï¥
  return {
    x: roundToTen(mouseStore.position.x),
    y: roundToTen(mouseStore.position.y)
  };
});

//ÊàøÈó¥Â∏ÉÂ±ÄÂèäradarÂØºÂÖ•ÂØºÂá∫
// ÂØºÂá∫ÂäüËÉΩ
const saveRoomLayout = () => {
  const layout: RoomLayout = {
    objects: objectsStore.objects.filter(obj => obj.typeName !== 'Radar')
  };

  const blob = new Blob([JSON.stringify(layout, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'room_layout.json';
  a.click();
  URL.revokeObjectURL(url);
};

const saveRadarConfig = () => {
  // Ëé∑ÂèñÊâÄÊúâÈõ∑ËææÈÖçÁΩÆ
  const radars = objectsStore.objects
    .filter(obj => obj.typeName === 'Radar')
    .map(radar => ({
      typeValue: radar.typeValue,
      typeName: radar.typeName,
      name: radar.name,
      position: radar.position,
      rotation: radar.rotation,
      mode: radar.mode,
      ceiling: radar.ceiling,
      wall: radar.wall,
      isLocked: radar.isLocked
    }));

  if (radars.length > 0) {
    radars.forEach(radar => {
      const blob = new Blob([JSON.stringify(radar, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      // ‰ΩøÁî®Èõ∑ËææÂêçÁß∞‰Ωú‰∏∫Êñá‰ª∂Âêç
      a.download = `${radar.name}_config.json`;
      a.click();
      URL.revokeObjectURL(url);
    });
  }
};

// ÂØºÂÖ•ÂäüËÉΩ
const loadRoomLayout = () => {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = '.json';
  input.onchange = async (e: Event) => {
    const file = (e.target as HTMLInputElement).files?.[0];
    if (file) {
      const text = await file.text();
      const layout: RoomLayout = JSON.parse(text);
      
      // ‰øùÁïôÁé∞ÊúâÈõ∑Ëææ
      const radars = objectsStore.objects.filter(obj => obj.typeName === 'Radar');
      // Ê∏ÖÈô§ÈùûÈõ∑ËææÂØπË±°
      objectsStore.objects = radars;
      // Âä†ËΩΩÊñ∞ÁöÑÂõ∫ÂÆöÁâ©‰Ωì
      layout.objects.forEach(obj => {
        objectsStore.createObject(obj);
      });
    }
  };
  input.click();
};

const loadRadarConfig = () => {
  const input = document.createElement('input');
  input.type = 'file';
  input.multiple = true;  // ÂÖÅËÆ∏ÈÄâÊã©Â§ö‰∏™Êñá‰ª∂
  input.accept = '.json';
  input.onchange = async (e: Event) => {
    const files = (e.target as HTMLInputElement).files;
    if (files) {
      for (let i = 0; i < files.length; i++) {
        const text = await files[i].text();
        const radarConfig = JSON.parse(text);
        if (radarConfig.typeName === 'Radar') {
          // Ê£ÄÊü•ÊòØÂê¶Â∑≤Â≠òÂú®ÂêåÂêçÈõ∑Ëææ
          const existingRadar = objectsStore.objects.find(
            obj => obj.typeName === 'Radar' && obj.name === radarConfig.name
          );
          if (existingRadar) {
            // Êõ¥Êñ∞Áé∞ÊúâÈõ∑ËææÈÖçÁΩÆ
            objectsStore.updateObject(existingRadar.id, radarConfig);
          } else {
            // ÂàõÂª∫Êñ∞Èõ∑Ëææ
            objectsStore.createObject(radarConfig);
          }
        }
      }
    }
  };
  input.click();
};


</script>


###########//3 Ê†∑ÂºèÈÉ®ÂàÜscss

<style lang="scss" scoped>
.radar-toolbar {
  position: relative;
  padding: 8px;
  height: 100%;

  .template-area {
    .template-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 4px;
      margin-bottom: 6px;

      .template-btn {
        padding: 6px;
        border: 1px solid #ccc;
        font-size: 12px;
        cursor: pointer;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;

        &.door {
          background: #a0eda0;
        }
        &.bed {
          background: #add8e6;
        }
        &.exclude {
          background: #f0e68c;
        }
        &.other {
          background: #d3d3d3;
        }

        .radar-icon {
          width: 20px;
          height: 20px;
          position: relative;

          .radar-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(
              to bottom,
              #fff 0%,
              #0cade3 50%,
              #fff 100%
            );
          }

          .direction-point {
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.2);
          }
        }

        .m-icon {
          font-weight: bold;
          color: #1890ff;
        }

        &:hover {
          opacity: 0.8;
        }
        &.active {
          border-color: #1890ff;
          opacity: 1;
        }
      }
    }

    .action-buttons {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 4px;

      .action-btn {
        height: 28px;
        border: 1px solid #ccc;
        border-radius: 2px;
        font-size: 12px;
        cursor: pointer;

        &.create-btn {
          background: #1890ff;
          color: white;
          &:hover {
            background: #40a9ff;
          }
        }

		/* Âà†Èô§setÈîÆ
        &.set-btn {
          background: #ccc; // ÈªòËÆ§ÁÅ∞Ëâ≤
          color: white;

          &:not(:disabled) {
            // ÂèØÁî®Áä∂ÊÄÅ
            background: #52c41a; // ÁªøËâ≤
            &:hover {
              background: #73d13d;
            }
          }

          &:disabled {
            cursor: not-allowed;
          }
        }
		*/

        &.delete-btn {
          background: #ff4d4f;
          color: white;
          &:hover {
            background: #ff7875;
          }
        }

        &:disabled {
          background: #ccc;
          cursor: not-allowed;
        }

      }

	  .layout-btn {
        height: 28px;
        border: 1px solid #ccc;
        border-radius: 2px;
        font-size: 12px;
        cursor: pointer;
		//background: #d5e7f7;
		&:hover {
		  background: #b3d7f5;
		}
	  }
    }
  }

.property-area {
  background: #f9f9f9; // ËÆæÁΩÆËÉåÊôØÈ¢úËâ≤‰∏∫ÊµÖÁÅ∞Ëâ≤
  //padding: 10px 12px; // Â¢ûÂä†ÂÜÖËæπË∑ùÔºå‰∏ä‰∏ã10,Â∑¶Âè≥12
  padding-top: 10;  //Âè™ËÆæ‰∏äËæπË∑ù
  border-radius: 4px; // ËÆæÁΩÆÂúÜËßíËæπÊ°ÜÔºåÂçäÂæÑ‰∏∫4px
  margin-top: 6px; // Â¢ûÂä†‰∏étemplateÂå∫ÁöÑÈó¥Ë∑ùÔºåÈ°∂ÈÉ®Èó¥Ë∑ù‰∏∫1px
  margin-bottom: 120px; // ÂáèÂ∞ëÂ∫ïÈÉ®Á©∫Èó¥ÔºåÂ∫ïÈÉ®Èó¥Ë∑ù‰∏∫120px

  // Â¢ûÂä†ÂêÑÈÉ®ÂàÜÈó¥Ë∑ùÔºåÈÄâÊã©.property-areaÁöÑÁõ¥Êé•Â≠êÂÖÉÁ¥†div
  > div {
    margin-bottom: 10px; // Â¢ûÂä†ÂêÑÈÉ®ÂàÜ‰πãÈó¥ÁöÑÈó¥Ë∑ù‰∏∫10px
  }

 
  .name-row {
  display: flex;
  gap: 4px;
  align-items: center;
  padding-right: 6px;  // Ê∑ªÂä†Âè≥ËæπË∑ùÔºåÁ°Æ‰øù‰∏ç‰ºöË¥¥ÁùÄËæπÁïå
  margin-bottom: 8px;

  span {
    font-size: 12px;
    color: #666;
    min-width: 40px;  // ‰∏éÂÖ∂‰ªñÊ†áÁ≠æÂÆΩÂ∫¶‰øùÊåÅ‰∏ÄËá¥
  }

  .name-input {
    width: 110px;
    height: 24px;  // ‰∏éÊåâÈíÆÈ´òÂ∫¶‰øùÊåÅ‰∏ÄËá¥
    padding: 0 6px;
    font-size: 12px;
    border: 1px solid #ccc;
    border-radius: 2px;
    box-sizing: border-box;

    &:focus {
      outline: none;
      border-color: #1890ff;
    }

    &::placeholder {
      color: #ccc;
    }
  }
}

  /*
  .name-row {
    margin-bottom: 8px; // Â¢ûÂä†Â∫ïÈÉ®Èó¥Ë∑ù‰∏∫8px
	
	span {
          font-size: 12px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
          color: #666; // ÊñáÂ≠óÈ¢úËâ≤‰∏∫ÁÅ∞Ëâ≤
        }

    .name-input {
      width:  100px ;//100%; // ËæìÂÖ•Ê°ÜÂÆΩÂ∫¶Âç†Êª°Áà∂ÂÆπÂô®
      padding: 4px; // ËæìÂÖ•Ê°ÜÂÜÖËæπË∑ù‰∏∫4px
      font-size: 12px; // ËæìÂÖ•Ê°ÜÂ≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
      border: 1px solid #ccc; // ËæìÂÖ•Ê°ÜËæπÊ°Ü‰∏∫1pxÁöÑÁÅ∞Ëâ≤ÂÆûÁ∫ø
      border-radius: 2px; // ËæìÂÖ•Ê°ÜÂúÜËßíËæπÊ°ÜÔºåÂçäÂæÑ‰∏∫2px
      margin-right: 6px; // Â¢ûÂä†Âè≥ËæπË∑ù‰∏∫2px
    }

 	 Âà†Èô§setÈîÆÔºålayout ‰∏äÁßªËá≥action-buttons
		.layout-btn {
		width:49px;
        height: 23px;
		border: 1px solid #ccc;
        border-radius: 2px;
		//margin-right: 2px;
        font-size: 12px;
        cursor: pointer;
		//background: #d5e7f7;
		&:hover {
			background: #b3d7f5;
		}
  	} 
  }
  */

  .size-row {
    display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
    gap: 10px; // Â≠êÂÖÉÁ¥†‰πãÈó¥ÁöÑÈó¥Ë∑ù‰∏∫10px
    margin-bottom: 8px; // Â¢ûÂä†Â∫ïÈÉ®Èó¥Ë∑ù‰∏∫8px

    .input-group {
      display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
      align-items: center; // Â≠êÂÖÉÁ¥†ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê

      span {
        font-size: 12px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
        margin-right: 4px; // Âè≥ËæπË∑ù‰∏∫4px
      }

      input {
        width: 50px; // ËæìÂÖ•Ê°ÜÂÆΩÂ∫¶‰∏∫50px
        padding: 2px 4px; // ËæìÂÖ•Ê°ÜÂÜÖËæπË∑ù‰∏ä‰∏ã2pxÔºåÂ∑¶Âè≥4px
        text-align: right; // ËæìÂÖ•Ê°ÜÊñáÊú¨Âè≥ÂØπÈΩê
        font-size: 12px; // ËæìÂÖ•Ê°ÜÂ≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
        border: 1px solid #ccc; // ËæìÂÖ•Ê°ÜËæπÊ°Ü‰∏∫1pxÁöÑÁÅ∞Ëâ≤ÂÆûÁ∫ø
        border-radius: 2px; // ËæìÂÖ•Ê°ÜÂúÜËßíËæπÊ°ÜÔºåÂçäÂæÑ‰∏∫2px
      }
    }
  }

  .specific-props {
    font-size: 12px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px

    .mode-select {
      display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
      gap: 20px; // ‰∏§‰∏™ÈÄâÈ°π‰πãÈó¥ÁöÑÈó¥Ë∑ù‰∏∫20px
      margin-bottom: 10px; // Â¢ûÂä†Â∫ïÈÉ®Èó¥Ë∑ù‰∏∫10px

      label {
        display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
        align-items: center; // Â≠êÂÖÉÁ¥†ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê
        gap: 6px; // radio‰∏éÊñáÂ≠óÁöÑÈó¥Ë∑ù‰∏∫6px
        cursor: pointer; // Èº†Ê†áÊÇ¨ÂÅúÊó∂ÊòæÁ§∫‰∏∫ÊåáÈíàÊ†∑Âºè

        input[type="radio"] {
          margin: 0; // ÂéªÈô§ÈªòËÆ§Â§ñËæπË∑ù
        }
      }
    }

    .height-input {
      margin-bottom: 8px; // Â¢ûÂä†Â∫ïÈÉ®Èó¥Ë∑ù‰∏∫8px

      .input-group {
        display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
        align-items: center; // Â≠êÂÖÉÁ¥†ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê

        span {
          font-size: 12px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
          margin-right: 4px; // Âè≥ËæπË∑ù‰∏∫4px

          &.accuracy {
            margin-left: 12px; // Â∑¶ËæπË∑ù‰∏∫12px
            color: #666; // ÊñáÂ≠óÈ¢úËâ≤‰∏∫ÁÅ∞Ëâ≤
            font-size: 11px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫11px
          }
        }

        input {
          width: 50px; // ËæìÂÖ•Ê°ÜÂÆΩÂ∫¶‰∏∫45px
          padding: 2px 4px; // ËæìÂÖ•Ê°ÜÂÜÖËæπË∑ù‰∏ä‰∏ã2pxÔºåÂ∑¶Âè≥4px
          text-align: right; // ËæìÂÖ•Ê°ÜÊñáÊú¨Âè≥ÂØπÈΩê
          font-size: 12px; // ËæìÂÖ•Ê°ÜÂ≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
          border: 1px solid #ccc; // ËæìÂÖ•Ê°ÜËæπÊ°Ü‰∏∫1pxÁöÑÁÅ∞Ëâ≤ÂÆûÁ∫ø
          border-radius: 2px; // ËæìÂÖ•Ê°ÜÂúÜËßíËæπÊ°ÜÔºåÂçäÂæÑ‰∏∫2px
        }
      }
    }

    .boundary-settings {
      margin: 8px 0; // ‰∏ä‰∏ãÂ§ñËæπË∑ù‰∏∫8pxÔºåÂ∑¶Âè≥Â§ñËæπË∑ù‰∏∫0

      .boundary-row {
        display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
        align-items: center; // Â≠êÂÖÉÁ¥†ÂûÇÁõ¥Â±Ö‰∏≠ÂØπÈΩê
        gap: 8px; // Â≠êÂÖÉÁ¥†‰πãÈó¥ÁöÑÈó¥Ë∑ù‰∏∫8px
        margin-bottom: 6px; // Â¢ûÂä†Â∫ïÈÉ®Èó¥Ë∑ù‰∏∫6px

        span {
          font-size: 12px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
          color: #666; // ÊñáÂ≠óÈ¢úËâ≤‰∏∫ÁÅ∞Ëâ≤
        }

        .input-group {
          flex: 1; // ÂºπÊÄß‰º∏Áº©ÔºåÂç†Êª°Ââ©‰ΩôÁ©∫Èó¥
          input {
            width: 50px; // ËæìÂÖ•Ê°ÜÂÆΩÂ∫¶‰∏∫45px
            padding: 2px 4px; // ËæìÂÖ•Ê°ÜÂÜÖËæπË∑ù‰∏ä‰∏ã2pxÔºåÂ∑¶Âè≥4px
            text-align: right; // ËæìÂÖ•Ê°ÜÊñáÊú¨Âè≥ÂØπÈΩê
            font-size: 12px; // ËæìÂÖ•Ê°ÜÂ≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px
            border: 1px solid #ccc; // ËæìÂÖ•Ê°ÜËæπÊ°Ü‰∏∫1pxÁöÑÁÅ∞Ëâ≤ÂÆûÁ∫ø
            border-radius: 2px; // ËæìÂÖ•Ê°ÜÂúÜËßíËæπÊ°ÜÔºåÂçäÂæÑ‰∏∫2px
          }
        }
      }
    }

    // Êñ∞Â¢ûÁöÑ show-controls Ê†∑Âºè
    .show-controls {
      display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
      align-items: flex-start; // Â∑¶ÂØπÈΩê
      margin-top: 8px; // È°∂ÈÉ®Â§ñËæπË∑ù‰∏∫8px
      padding: 4px 0; // ‰∏ä‰∏ãÂÜÖËæπË∑ù‰∏∫4pxÔºåÂ∑¶Âè≥ÂÜÖËæπË∑ù‰∏∫0
      
      label {
        display: flex; // ‰ΩøÁî®flexÂ∏ÉÂ±Ä
        //align-items: center;
        gap: 6px; // Â≠êÂÖÉÁ¥†‰πãÈó¥ÁöÑÈó¥Ë∑ù‰∏∫6px
        font-size: 12px; // Â≠ó‰ΩìÂ§ßÂ∞è‰∏∫12px

        input[type="checkbox"] {
          margin: 0; // ÂéªÈô§ÈªòËÆ§Â§ñËæπË∑ù
          cursor: pointer; // Èº†Ê†áÊÇ¨ÂÅúÊó∂ÊòæÁ§∫‰∏∫ÊåáÈíàÊ†∑Âºè
        }

        span {
          user-select: none; // Á¶ÅÊ≠¢Áî®Êà∑ÈÄâÊã©ÊñáÊú¨
		margin-right: 0px   ; // ÂêëÂ∑¶ËæπÊ°ÜÁßªÂä®ÔºåÂè™‰øùÁïô0pxÈó¥Ë∑ù
        }
      }
    }
  }
}

  .control-area {
    position: absolute;
    bottom: 2px; // Áº©Áü≠10px
    left: 8px;
    right: 8px;
    background: #f9f9f9;
    padding: 10px;
    border-top: 1px solid #eee;

    // ÂùêÊ†áÊòæÁ§∫
    .coordinates {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;

      .coord-item {
        display: flex;
        align-items: center;
        gap: 4px;

        span {
          font-size: 12px;
        }

        input {
          width: 50px;
          text-align: right;
          font-size: 12px;
          border: none;
          background: transparent;
          padding: 2px;

          &:focus {
            outline: none;
          }
        }
      }
    }

    .direction-control {
      display: flex;
      flex-direction: row;
      align-items: center;
      margin-bottom: 10px;
      width: 100%; /* ÂÆπÂô®ÂÆΩÂ∫¶ÔºåÊ†πÊçÆÈúÄË¶ÅË∞ÉÊï¥ */
      justify-content: space-between; /* Â∑¶Âè≥‰∏§ÂàóÊ∞¥Âπ≥Êãâ‰º∏Ôºå‰∏§Á´ØÂØπÈΩê */

      .left-controls {
        width: 50px; /* Ë∞ÉÊï¥Â∑¶ÂàóÂÆΩÂ∫¶ÔºåÊ†πÊçÆÂÆûÈôÖÂÜÖÂÆπË∞ÉÊï¥ */
      }

      .right-controls {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .direction-buttons {
        display: flex;
        flex-direction: column; /* ÊñπÂêëÈîÆÁ´ñÂêëÊéíÂàó */
        align-items: center; /* ÊñπÂêëÈîÆÊ∞¥Âπ≥Â±Ö‰∏≠ */
        justify-content: center; /* ÊñπÂêëÈîÆÂûÇÁõ¥Â±Ö‰∏≠ */
      }

      .middle-row {
        display: flex;
        gap: 20px;
        margin: 4px 0;
      }

      .dir-btn {
        width: 24px;
        height: 24px;
        padding: 0;
        border: 1px solid #ccc;
        background: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;

        &:hover {
          background: #f0f0f0;
        }
        &:disabled {
          background: #f5f5f5;
          cursor: not-allowed;
          color: #ccc;
        }
      }
    }

    // ÊóãËΩ¨ÊéßÂà∂
    .rotation-control {
      margin-top: 10px;
      display: flex;
      justify-content: space-between;

      .rot-btn {
        padding: 2px 4px;
        border: 1px solid #ccc;
        background: white;
        cursor: pointer;
        font-size: 11px;

        &:hover {
          background: #f0f0f0;
        }
        &:disabled {
          background: #f5f5f5;
          cursor: not-allowed;
          color: #ccc;
        }
      }
    }
  }
}

input[type="number"] {
  appearance: textfield;
  -moz-appearance: textfield;
  -webkit-appearance: textfield;
  &::-webkit-outer-spin-button,
  &::-webkit-inner-spin-button {
    appearance: none;
    -webkit-appearance: none;
    margin: 0;
  }
}



</style>
